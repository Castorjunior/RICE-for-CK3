RICE_sus_increase_sijilmasa_prosperity_effect = {
	if = { # Failsafe in case no prosperity level
		limit = {
			title:c_sijilmasa = {
				NOR = {
					has_county_modifier = RICE_sus_sijilmasa_prosperity_0
					has_county_modifier = RICE_sus_sijilmasa_prosperity_1
					has_county_modifier = RICE_sus_sijilmasa_prosperity_2
					has_county_modifier = RICE_sus_sijilmasa_prosperity_3
				}
			}
		}
		title:c_sijilmasa = {
			add_county_modifier = {
				modifier = RICE_sus_sijilmasa_prosperity_1
			}
		}
	}
	else_if = {
		limit = {
			title:c_sijilmasa = {
				has_county_modifier = RICE_sus_sijilmasa_prosperity_0
			}
		}
		title:c_sijilmasa = {
			remove_county_modifier = RICE_sus_sijilmasa_prosperity_0
			add_county_modifier = {
				modifier = RICE_sus_sijilmasa_prosperity_1
			}
		}
	}
	else_if = {
		limit = {
			title:c_sijilmasa = {
				has_county_modifier = RICE_sus_sijilmasa_prosperity_1
			}
		}
		title:c_sijilmasa = {
			remove_county_modifier = RICE_sus_sijilmasa_prosperity_1
			add_county_modifier = {
				modifier = RICE_sus_sijilmasa_prosperity_2
			}
		}
	}
	else_if = {
		limit = {
			title:c_sijilmasa = {
				has_county_modifier = RICE_sus_sijilmasa_prosperity_2
			}
		}
		title:c_sijilmasa = {
			remove_county_modifier = RICE_sus_sijilmasa_prosperity_2
			add_county_modifier = {
				modifier = RICE_sus_sijilmasa_prosperity_3
			}
		}
	}
}


#RICE_sus_peace_in_sijilmasa_effect = {
#	title:c_sijilmasa = {
#		remove_county_modifier = RICE_sus_sijilmasa_civil_unrest
#	}
#	RICE_sus_increase_sijilmasa_prosperity_effect = yes
#}


RICE_sus_create_sijilmasa_mint_effect = {
	add_prestige = 500
	RICE_sus_increase_sijilmasa_prosperity_effect = yes
	title:b_tafilalt.title_province = {
		add_special_building = RICE_sus_sijilmasan_mints_01
	}
}


RICE_sus_ziz_hydraulics_effect = {
	RICE_sus_increase_sijilmasa_prosperity_effect = yes
	add_character_modifier = {
		modifier = RICE_sus_ziz_hydraulics_person
	}
	title:c_sijilmasa = {
		add_county_modifier = {
			modifier = RICE_sus_ziz_hydraulics
		}
	}
}

# Clean up Trans-Saharan modifiers and flags
RICE_sus_clean_up_trans_saharan_merchant_effect = {
	if = {
		limit = {
			has_character_modifier = RICE_sus_currently_trans_saharan_networking
		}
		remove_character_modifier = RICE_sus_currently_trans_saharan_networking
	}
	if = {
		limit = {
			has_character_flag = RICE_trans_saharan_networking_boost_tiny
		}
		remove_character_flag = RICE_trans_saharan_networking_boost_tiny
	}
	if = {
		limit = {
			has_character_flag = RICE_trans_saharan_networking_boost_small
		}
		remove_character_flag = RICE_trans_saharan_networking_boost_small
	}
	if = {
		limit = {
			has_character_flag = RICE_trans_saharan_networking_boost_medium
		}
		remove_character_flag = RICE_trans_saharan_networking_boost_medium
	}
	if = {
		limit = {
			has_character_flag = RICE_trans_saharan_networking_boost_large
		}
		remove_character_flag = RICE_trans_saharan_networking_boost_large
	}
	if = {
		limit = {
			has_character_flag = RICE_trans_saharan_networking_boost_huge
		}
		remove_character_flag = RICE_trans_saharan_networking_boost_huge
	}
}

# Clean up Trans-Saharan modifiers and flags
RICE_sus_determine_merchant_skill_effect = {
	random_list = {
		50 = {
			add_character_modifier = {
				modifier = RICE_sus_apprentice_trans_saharan_merchant
			}
			random_list = {
				50 = { add_gold = 25 }
				40 = { add_gold = 50 }
				30 = { add_gold = 75 }
				20 = { add_gold = 100 }
				10 = { add_gold = 125 }
			}
		}
		35 = {
			add_character_modifier = {
				modifier = RICE_sus_experienced_trans_saharan_merchant
			}
			random_list = {
				50 = { add_gold = 40 }
				40 = { add_gold = 80 }
				30 = { add_gold = 120 }
				20 = { add_gold = 160 }
				10 = { add_gold = 180 }
			}
		
		}
		15 = {
			add_character_modifier = {
				modifier = RICE_sus_master_trans_saharan_merchant
			}
			random_list = {
				50 = { add_gold = 50 }
				40 = { add_gold = 100 }
				30 = { add_gold = 150 }
				20 = { add_gold = 200 }
				10 = { add_gold = 250 }
			}		
		}
	}
}